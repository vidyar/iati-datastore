# This YML file was generated by the Shippable Jenkins migrator wizard
# The generator makes some assumptions about your project, so please 
# verify the contents of this file before proceeding

language: python

python:
 - 2.7

build_image: shippableimages/ubuntu1404_python

script: 
 - PATH=$WORKSPACE/ve/bin:/usr/local/bin:$PATH
 - virtualenv ve
 - . ve/bin/activate
 - sudo apt-get install -y python-dev
 - sudo easy_install -U pip
 - mkdir -p shippable/testresults shippable/codecoverage
 - sudo apt-get install -y libevent-dev

 - sudo apt-get build-dep -y python-psycopg2
 - sudo pip install -r requirements_dev.txt --use-mirrors
 - nosetests iati_datastore --with-coverage --cover-package=iati-datastore --with-xunit --xunit-file=shippable/testresults/nosetests.xml
 - coverage xml -o shippable/codecoverage/coverage.xml
